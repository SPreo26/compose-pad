<!DOCTYPE html>
<html>
<head>
  <title>ComposePad</title>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Oxygen:400,700' rel='stylesheet' type='text/css'>
  <link rel="shortcut icon" href="/assets/music_notes1_nJp_icon.ico">
  <meta charset="utf-8">

  <!--Bootstrap theme header...-->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">
  <!--End Bootstrap-->

  <!--MIDI js -->
  <!-- polyfill -->
 
  <!-- End MIDI js -->
</head>
<body style="background-color:#222"
ng-app="app">
  <div class="flash-messages">
    <%flash.each do |name, message| %>
      <% if !message.empty? %>
        <div class="alert alert-<%= name %> alert-dismissible">
          <button type="button" class="close" data-dismiss="alert" aria-label="close"><span aria-hidden="true">&times;</span></button>
          <%= message %>
        </div>
      <% end %>
    <%end %>
  </div>

<%= yield %>

 <!-- Navigation -->
  <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand navbar-brand-match-tabs" href="/" >
            Compose Pad
          </a>
      </div>
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="navbar-collapse-1"
      >
        <ul class="nav navbar-nav ">
          <li class="dropdown">
            <a href="#" class="dropdown-toggle navbar-item-match-tabs" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">File<i class="fa fa-bars"></i></a>
            <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
              <% if current_user %>
                <li> 
                  <%= link_to "New", '/note_files/new' %>
                </li>
                <li> 
                  <%= link_to "My Files...", '/my_files' %> 
                </li>
              <% else %>
                <%= render "/note_files/file_menu_top_when_logged_out" %>
              <% end %>
              <% if current_user && @action_is_workspace %>
                <%= render "/note_files/file_menu_when_workspace_shown"%>
              <% elsif current_user && NoteFile.find_by({user_id:current_user.id, file_open: true}) %>
                <%= render "/note_files/file_menu_when_files_open_not_shown"%>
              <% else %>  
                <li> 
                  <a class = "disabled-link"> Save </a> 
                </li>
<!--                 <li> 
                  <a class = "disabled-link"> Save As... </a>
                </li> -->
                <li> 
                  <a class = "disabled-link"> Save All </a> 
                </li>
                <hr style="width: 77%; height: 0em; background: #fff; margin: 10px auto;">
                <li> 
                  <a class = "disabled-link"> Close </a> 
                </li>
<!--                 <li> 
                  <a class = "disabled-link"> Revert File </a>
                </li> -->
                <li> 
                  <a class = "disabled-link"> Close All </a> 
                </li>
              <% end %>            
            </ul>
          </li>
          <li>
            <a class="navbar-item-match-tabs" href="https://drive.google.com/open?id=0Bxvz4oBLx9gZZUg1VTZqaGo1SEU">Quick Tutorial...</a>
          </li>
        </ul>
        <ul class="nav navbar-nav navbar-right navbar-margin-right navbar-margin-bottom">
          
          <% if current_user %>
            <li> <%= link_to "Sign out", "/users/sign_out", method: "delete",class: "navbar-item-match-tabs" %> </li>
          <% else %>
            <li> <%= link_to "Sign up", "/users/sign_up", class: "navbar-item-match-tabs" %> </li>    
            <li> <%= link_to "Sign in", "/users/sign_in", class: "navbar-item-match-tabs" %> </li>
          <% end %>
        </ul>
        <% if @action_is_workspace %>
          
          <div ng-controller = "workspaceCtrl" ng-init="setup()" >
            <uib-tabset active="active">
              <uib-tab index="$index + 1" ng-repeat="openFile in openFiles track by $index" heading="{{openFile.name}}" disable="tab.disabled">
                <div ng-class = " $index==0? 'tab-pane in active' : 'tab-pane'"
                id = "{{'file'+$index}}">
                  <%= render "/note_files/workspace_file", {index: 0}%>
                </div>
              </uib-tab>
            </uib-tabset>
          </div>
        <% end %> <!-- end if action_is_workspace? -->         
      </div><!-- /.navbar-collapse -->
    </div><!-- /.container -->
  </nav>

<!-- Full Page Image Background Carousel Header -->
  <script>
    $(document).ready(function(){
        $('[data-toggle="tooltip"]').tooltip(); 
    });
  </script>

</body>
</html>
