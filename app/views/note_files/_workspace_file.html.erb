<ng-form action="/note_files/{{file.id}}" id="note-file-form{{$index}}" method="patch">
  <table class="division-table">
    <tr>
      <td width="2%"></td>
      <td ng-repeat="beat in allBeatCells track by $index" ng-style="{'width':'2%'}">
        {{beat}}
        <!-- allBeatCells is an array made such that label printed on beat only, otherwise an empty string is printed -->
      </td>
    </tr>
  </table>
  <div class="matrix-table-container" ng-init="adjustMatrixMaxHeightToWindowHeight()">
    <table class="matrix-table">
      <tr ng-repeat="(pitch, divisions) in file.matrix">
        <td width="2%"> {{pitch}} </td>
        <td ng-repeat="(division, divisionValue) in divisions"
        width="2%"
        ng-init="($last && $parent.$last)? drawD3Notes(file) : null"
        ng-click="onlyOnePitchPerStartIndex(file.matrix,pitch,division)? newD3Note(file,pitch,division):null">
          <div ng-if="divisions[division]"
          id="{{'file'+file.id+'note'+pitch+'-'+division}}">
          </div>

         <!--   -->
          <!-- <input type="checkbox"
          ng-model="divisions[division]" id="{{'note-'+pitch+'-'+division}}"
          ng-click="onlyOnePitchPerStartIndex(file.matrix,pitch,division)"> -->
        </td>
      </tr>
    </table>
  </div>
</ng-form>